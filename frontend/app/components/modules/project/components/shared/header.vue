<template>
  <div class="min-h-[10.75rem]  sticky top-14 lg:top-17 z-10">
    <div class="bg-white outline outline-neutral-200">
      <section class="container">
        <div
          class="ease-linear transition-all"
          :class="scrollTop > 50 ? 'py-4' : 'py-6'">

          <div class="flex items-center justify-between ">
            <div class="flex items-center">
              <div
                class="ease-linear transition-all pr-4">
                <lfx-icon-button type="transparent" icon="angle-left" class="" />
              </div>
              <lfx-avatar
                type="organization"
                :size="scrollTop > 50 ? 'normal' : 'large'"
                class="mr-4"
                src="https://c8.alamy.com/comp/2M8NCEE/kubernetes-logo-white-background-2M8NCEE.jpg" />
              <h1
                class="font-bold mr-3 ease-linear transition-all font-secondary duration-200"
                :class="scrollTop > 50 ? 'text-heading-3' : 'text-heading-2'"
              >
                {{ slug }}
              </h1>
              <span
                class="mr-1 text-neutral-400 font-secondary leading-8 ease-linear transition-all"
                :class="scrollTop > 50 ? 'text-xl' : 'text-2xl'">/</span>
              <div
                class="flex items-center gap-2 cursor-pointer px-2 py-0.5
              rounded-lg transition hover:bg-neutral-100">
                <p
                  class="text-neutral-400 leading-8 ease-linear transition-all"
                  :class="scrollTop > 50 ? 'text-xl' : 'text-2xl'">
                  <span v-if="repoName" class="font-secondary">{{ repoName }}</span>
                  <span class="font-secondary">All repositories</span>
                </p>
                <lfx-icon name="angles-up-down" :size="12" class="text-neutral-400" />
              </div>
            </div>
            <lfx-share>
              <lfx-button type="tertiary" class="!rounded-full">
                <lfx-icon name="link-simple" />
                Share
              </lfx-button>
            </lfx-share>
          </div>
        </div>
        <div class="flex justify-between items-center transition-all" :class="scrollTop > 50 ? 'py-4' : 'py-5'">
          <div class="flex items-center gap-3">
            <lfx-menu-button
              :to="{ name: repoName ? LfxRoutes.REPOSITORY : LfxRoutes.PROJECT }"
              exact>
              <lfx-icon name="gauge-high" />
              Overview
            </lfx-menu-button>
            <lfx-menu-button
              :to="{
                name: repoName ? LfxRoutes.REPOSITORY_CONTRIBUTORS : LfxRoutes.PROJECT_CONTRIBUTORS
              }">
              <lfx-icon name="people-group" />
              Contributors
            </lfx-menu-button>
            <lfx-menu-button
              :to="{
                name: repoName ? LfxRoutes.REPOSITORY_POPULARITY : LfxRoutes.PROJECT_POPULARITY
              }">
              <lfx-icon name="fire" />
              Popularity
            </lfx-menu-button>
            <lfx-menu-button
              :to="{
                name: repoName ? LfxRoutes.REPOSITORY_DEVELOPMENT : LfxRoutes.PROJECT_DEVELOPMENT
              }">
              <lfx-icon name="code" />
              Development
            </lfx-menu-button>
            <lfx-menu-button
              :to="{ name: repoName ? LfxRoutes.REPOSITORY_SECURITY : LfxRoutes.PROJECT_SECURITY }">
              <lfx-icon name="shield-check" />
              Security & Best Practices
            </lfx-menu-button>
          </div>
        </div>
      </section>
    </div>
  </div>
</template>

<script lang="ts" setup>
import {useRoute} from 'nuxt/app';
import {computed} from 'vue';
import {LfxRoutes} from '~/components/shared/types/routes';
import LfxIcon from '~/components/uikit/icon/icon.vue';
import LfxMenuButton from '~/components/uikit/menu-button/menu-button.vue';
import LfxAvatar from '~/components/uikit/avatar/avatar.vue';
import LfxButton from '~/components/uikit/button/button.vue';
import useScroll from "~/components/shared/utils/scroll";
import LfxIconButton from "~/components/uikit/icon-button/icon-button.vue";
import LfxShare from "~/components/uikit/share/share.vue";

const route = useRoute();

const slug = computed(() => route.params.slug);
const repoName = computed(() => route.params.name);

const {scrollTop} = useScroll();
</script>

<script lang="ts">
export default {
  name: 'LfxProjectHeader'
};
</script>
